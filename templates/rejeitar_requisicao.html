{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/rejeitar_requisicao.css') }}">

<div class="modal">
  <div class="modal-content">
    <!-- Botão de fechar com data-url para redirecionar -->
    <span class="close" data-url="{{ url_for('detalhe_requisicao', requisicao_id=requisicao.id) }}">&times;</span>
    <h3>Rejeitar Requisição (ID: {{ requisicao.id }})</h3>
    <form method="POST">
      {{ form.hidden_tag() }}
      <div class="form-group">
        {{ form.motivo.label }}
        {{ form.motivo(class="input-field", placeholder="Digite o motivo da rejeição...") }}
      </div>
      <div class="form-actions">
        <button type="submit" class="btn-reject">{{ form.submit.label.text }}</button>
        <a href="{{ url_for('detalhe_requisicao', requisicao_id=requisicao.id) }}" class="btn-back">Cancelar</a>
      </div>
    </form>
  </div>
</div>

<!-- Script para fechar o modal e redirecionar -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var closeBtn = document.querySelector('.close');
    if (closeBtn) {
      closeBtn.addEventListener('click', function() {
        var targetUrl = this.getAttribute('data-url');
        window.location.href = targetUrl;
      });
    }
  });
</script>
{% endblock %}
